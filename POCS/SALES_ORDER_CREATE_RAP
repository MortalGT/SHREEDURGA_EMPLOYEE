" Optimized Code Snippet
MODIFY ENTITIES OF i_salesordertp
  ENTITY salesorder
  CREATE
  FROM lt_so_header
  CREATE BY \_item FROM lt_so_item
  ENTITY SalesOrderItem
  CREATE BY \_ItemPricingElement FROM lt_so_prcd
  MAPPED DATA(ls_mapped)
  FAILED DATA(ls_failed)
  REPORTED DATA(ls_reported).

" Added Commit and Error Handling logic related to the above EML
IF ls_failed IS INITIAL.
  COMMIT ENTITIES RESPONSE OF i_salesordertp
    FAILED DATA(ls_commit_failed)
    REPORTED DATA(ls_commit_reported).
ELSE.
  " Handle failure (e.g., log errors)
ENDIF.