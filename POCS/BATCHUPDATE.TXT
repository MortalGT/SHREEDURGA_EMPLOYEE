    DATA: lt_char_update TYPE TABLE FOR CREATE i_batchtp_2\\batchcharacteristic\_batchcharacteristicvaluetp.

    lt_char_update = VALUE #( 
      ( material = 'FBPDTW003760180002'
        batch                    = 'FAB-005'
        charcinternalid          = '0000000818'
        %target = VALUE #(
          ( %cid          =  'C1'
            material        = 'FBPDTW003760180002'
            batch           = 'FAB-005'
            charcinternalid          = '0000000818'
            charcvalue      = 'Value5'

            %control-material           = cl_abap_behv=>flag_changed
            %control-batch              = cl_abap_behv=>flag_changed
            %control-charcinternalid    = cl_abap_behv=>flag_changed
            %control-charcvalue         = cl_abap_behv=>flag_changed )
         )
      )
      ( material = 'FBPDTW003760180002'
        batch                    = 'FAB-005'
        charcinternalid          = '0000000819'
        %target = VALUE #(
          ( %cid          =  'C2'
            material        = 'FBPDTW003760180002'
            batch           = 'FAB-005'
            charcinternalid          = '0000000819'
            charcvalue      = 'Value5'

            %control-material           = cl_abap_behv=>flag_changed
            %control-batch              = cl_abap_behv=>flag_changed
            %control-charcinternalid    = cl_abap_behv=>flag_changed
            %control-charcvalue         = cl_abap_behv=>flag_changed )
         )
      )
    ).

    MODIFY ENTITIES OF i_batchtp_2
    ENTITY batchcharacteristic
    CREATE BY \_batchcharacteristicvaluetp
    FROM lt_char_update
    MAPPED DATA(mapped)
    FAILED DATA(failed)
    REPORTED DATA(reported).

    DATA lo_msg TYPE REF TO if_message.
    LOOP AT reported-batchcharacteristic ASSIGNING FIELD-SYMBOL(<fs_rep>).
      lo_msg = <fs_rep>-%msg.
      IF lo_msg IS BOUND.
        DATA(lv_text) = lo_msg->get_text( ).
      ENDIF.
    ENDLOOP.

    COMMIT ENTITIES
      RESPONSE OF i_batchtp_2
      FAILED     DATA(ls_commit_failed)
      REPORTED   DATA(ls_commit_reported).