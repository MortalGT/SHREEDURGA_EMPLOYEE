managed implementation in class zbp_i_res_hdr unique;
strict ( 2 );

define behavior for ZI_RES_hdr alias hdr
persistent table zppt_res_hdrn
//persistent table <???>
lock master
authorization master ( instance )
//etag master <field_name>
{
  create ( authorization : global );
  update;
  delete;

  field ( readonly : update ) prod_order, operation;
//  determination loc on modify { field recloc; }
  action post result [1] $self;
  association _Items { create; }
  //{ create; }

  //  determination set_posting_date on modify { create; }
  mapping for zppt_res_hdrn
    {
      prod_order    = prod_order;
      operation     = operation;
      posting_date  = posting_date;
      total_qty_m   = total_qty_m;
      total_qty_kg  = total_qty_kg;
      liquor_volume = liquor_volume;
      glm           = glm;
      base_uom      = base_uom;
      nodrum        = nodrum;
      wrkc          = wrkc;
      drumsize      = drumsize;
      recloc        = recloc;
      createdby     = created_by;
      createdat     = created_at;
      lastchangedby = last_changed_by;
      lastchangedat = last_changed_at;
      user_input    = user_input_tetx;
      ProductionUnit = punit;
      yy1_glm_prd = yy1_glm_prd;

    }
}

define behavior for Zi_RES_itmn  alias _Items//alias <alias_name>
persistent table zppt_res_itemn
//persistent table <???>
lock dependent by _Header
authorization dependent by _Header
//etag master <field_name>
{
  update;
  delete;
//  determination batch on modify{ field batch,recloc1; }
//   { field batch,item,recloc1; }
  field ( readonly ) prod_order, operation;
  field ( readonly : update ) item, component;
  association _Header;

  mapping for zppt_res_itemn
    {
      prod_order          = prod_order;
      operation           = operation;
      item                = item;
      component           = component;
      description         = description;
      unit                = unit;
      quantity_as_per_bom = quantity_as_per_bom;
      new_qty             = new_qty;
      remark              = remark;
      createdby           = created_by;
      createdat           = created_at;
      lastchangedby       = last_changed_by;
      lastchangedat       = last_changed_at;
      user_input          = user_input_tetx;
      recloc1              = recloc1;
      batch               = batch;
    }
}